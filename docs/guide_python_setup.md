# macOS Python μ„¤μΉ λ° ν™κ²½ κµ¬μ„± κ°€μ΄λ“

μ΄λ² λ””λ²„κΉ…μ—μ„ ν™•μΈλ κ²ƒμ²λΌ, **macOS κΈ°λ³Έ μ κ³µ Python(System Python)**μ€ λ²„μ „μ΄ λ‚®κ±°λ‚(3.9.6 λ“±), OpenSSL λ“± μ£Όμ” λΌμ΄λΈλ¬λ¦¬κ°€ μ¤λλ λ²„μ „(LibreSSL)κ³Ό μ—°κ²°λμ–΄ μμ–΄ νΈν™μ„± λ¬Έμ κ°€ μμ£Ό λ°μƒν•©λ‹λ‹¤.

λ”°λΌμ„ κ°λ°μ©μΌλ΅λ” **Homebrew**μ™€ **Pyenv**λ¥Ό μ‚¬μ©ν•μ—¬ μµμ‹  μ•μ • λ²„μ „μ„ λ³„λ„λ΅ μ„¤μΉν•΄ μ‚¬μ©ν•λ” κ²ƒμ΄ ν‘μ¤€(Best Practice)μ…λ‹λ‹¤.

## 1. μ¶”μ² Python λ²„μ „
ν„μ¬(2026λ…„ 1μ›” κΈ°μ¤€) κ°€μ¥ μ•μ •μ μ΄κ³  νΈν™μ„±μ΄ μΆ‹μ€ λ²„μ „λ“¤μ€ λ‹¤μκ³Ό κ°™μµλ‹λ‹¤.

| λ²„μ „ | μƒνƒ | μ¶”μ² λ€μƒ | λΉ„κ³  |
|---|---|---|---|
| **Python 3.12.x** | **Stable (κ¶μ¥)** | μΌλ°μ μΈ μµμ‹  ν”„λ΅μ νΈ | μ„±λ¥ κ°μ„ , μµμ‹  λΌμ΄λΈλ¬λ¦¬ μ§€μ› |
| **Python 3.11.x** | Stable (LTSκΈ‰) | νΈν™μ„±μ΄ μ¤‘μ”ν• λ κ±°μ‹ ν”„λ΅μ νΈ | 3.12μ—μ„ νΈν™μ„± λ¬Έμ  λ°μƒ μ‹ λ€μ• |
| **Python 3.13.x** | Latest | μ–Όλ¦¬ μ–΄λ‹µν„° | μµμ‹  κΈ°λ¥ μ‹¤ν—μ© (μΌλ¶€ λΌμ΄λΈλ¬λ¦¬ λ―Έμ§€μ› κ°€λ¥μ„±) |

> **κ²°λ΅ **: νΉλ³„ν• μ΄μ κ°€ μ—†λ‹¤λ©΄ **Python 3.12.x**λ¥Ό μ„¤μΉν•μ„Έμ”.

---

## 2. μ„¤μΉ λ°©λ²• (Homebrew + Pyenv)

### Step 1. Homebrew μ„¤μΉ (μ΄λ―Έ μλ‹¤λ©΄ κ±΄λ„λ›°κΈ°)
ν„°λ―Έλ„μ—μ„ `brew` λ…λ Ήμ–΄κ°€ μ—†λ‹¤λ©΄ μ„¤μΉν•©λ‹λ‹¤.
```bash
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
```

### Step 2. ν•„μ μμ΅΄μ„± μ„¤μΉ (μ¤‘μ”: Tcl/Tk νΈν™μ„±)
macOS Homebrewμ μµμ‹  `tcl-tk`(v9.0)λ” Python 3.12μ™€ νΈν™λμ§€ μ•λ” κ²½μ°κ°€ λ§μµλ‹λ‹¤.
λ”°λΌμ„ **`tcl-tk@8`** λ²„μ „μ„ λ…μ‹μ μΌλ΅ μ„¤μΉν•κ³  μ—°κ²°ν•΄μ•Ό ν•©λ‹λ‹¤.

```bash
brew install openssl readline sqlite3 xz zlib tcl-tk@8
```

### Step 3. Pyenv μ„¤μΉ
μ—¬λ¬ Python λ²„μ „μ„ μ‰½κ² κ΄€λ¦¬ν•  μ μλ” λ„κµ¬μ…λ‹λ‹¤. (μ΄λ―Έ μλ‹¤λ©΄ μƒλµ)
```bash
brew install pyenv
```

**μ‰ μ„¤μ • μ¶”κ°€ (Zsh μ‚¬μ©μ)**:
`~/.zshrc`μ— λ‹¤μ μ„¤μ •μ΄ μμ–΄μ•Ό ν•©λ‹λ‹¤.
```bash
echo 'export PYENV_ROOT="$HOME/.pyenv"' >> ~/.zshrc
echo '[[ -d $PYENV_ROOT/bin ]] && export PATH="$PYENV_ROOT/bin:$PATH"' >> ~/.zshrc
echo 'eval "$(pyenv init -)"' >> ~/.zshrc
source ~/.zshrc
```

### Step 4. Python μ„¤μΉ (ν™κ²½λ³€μ μ„¤μ • ν•„μ)
`tcl-tk@8`μ„ μ»΄νμΌλ¬κ°€ μ°Ύμ„ μ μλ„λ΅ ν™κ²½λ³€μλ¥Ό μ„¤μ •ν• ν›„ μ„¤μΉν•©λ‹λ‹¤.
λν• **μµμ‹  ν¨μΉ λ²„μ „μΈ 3.12.8** μ„¤μΉλ¥Ό κ¶μ¥ν•©λ‹λ‹¤.

```bash
# μ»΄νμΌλ¬κ°€ tcl-tk@8μ„ μ°Ύλ„λ΅ κ²½λ΅ μ§€μ •
export PATH="/opt/homebrew/opt/tcl-tk@8/bin:$PATH"
export LDFLAGS="-L/opt/homebrew/opt/tcl-tk@8/lib"
export CPPFLAGS="-I/opt/homebrew/opt/tcl-tk@8/include"
export PKG_CONFIG_PATH="/opt/homebrew/opt/tcl-tk@8/lib/pkgconfig"

# μ„¤μΉ μ‹¤ν–‰
pyenv install 3.12.8
```

---

## 3. Pyenv λ²„μ „ κ΄€λ¦¬ μ‹¬ν™” κ°€μ΄λ“ (Detail)
Pyenvμ ν•µμ‹¬μ€ **"μ–΄λ””μ„ μ–΄λ–¤ λ²„μ „μ„ μ“Έμ§€"**λ¥Ό μ„Έλ°€ν•κ² μ μ–΄ν•λ” κ²ƒμ…λ‹λ‹¤.

### 1) λ²„μ „ μ΅°ν λ° ν™•μΈ
- **μ„¤μΉλ λ²„μ „ λ©λ΅**: λ‚΄ μ»΄ν“¨ν„°μ— μ„¤μΉλ Python λ²„μ „λ“¤μ„ ν™•μΈν•©λ‹λ‹¤. `*` ν‘μ‹κ°€ ν„μ¬ ν™μ„±ν™”λ λ²„μ „μ…λ‹λ‹¤.
  ```bash
  pyenv versions
  ```
- **μ„¤μΉ κ°€λ¥ λ©λ΅**: Pyenvλ΅ μ„¤μΉν•  μ μλ” λ¨λ“  Python λ²„μ „μ„ ν™•μΈν•©λ‹λ‹¤.
  ```bash
  pyenv install --list
  ```

### 2) λ²„μ „ μ μ© λ²”μ„ (μ°μ„ μμ„: Shell > Local > Global)
Pyenvλ” λ‹¤μ 3κ°€μ§€ λ‹¨κ³„λ΅ μ μ©λ  νμ΄μ¬ λ²„μ „μ„ κ²°μ •ν•©λ‹λ‹¤.

**β‘  Shell (ν„μ¬ ν„°λ―Έλ„ μ„Έμ…λ§)**
κ°€μ¥ λ†’μ€ μ°μ„ μμ„μ…λ‹λ‹¤. ν„μ¬ μ—΄λ ¤μλ” ν„°λ―Έλ„ μ°½μ—λ§ μ μ©λλ©°, μ°½μ„ λ‹«μΌλ©΄ μ‚¬λΌμ§‘λ‹λ‹¤. μ κΉ λ‹¤λ¥Έ λ²„μ „μΌλ΅ ν…μ¤νΈν•  λ• μ μ©ν•©λ‹λ‹¤.
```bash
pyenv shell 3.11.0
```

**β‘΅ Local (νΉμ • ν”„λ΅μ νΈ ν΄λ”) - κ¶μ¥ π**
νΉμ • λ””λ ‰ν† λ¦¬(ν”„λ΅μ νΈ ν΄λ”)μ— `.python-version` νμΌμ„ μƒμ„±ν•©λ‹λ‹¤.
μ΄ ν΄λ”μ— μ§„μ…ν•λ©΄ μλ™μΌλ΅ μ§€μ •λ Python λ²„μ „μΌλ΅ μ „ν™λ©λ‹λ‹¤. ν‘μ—… μ‹ ν€μ›λ“¤κ³Ό λ²„μ „μ„ λ§μ¶”κΈ°μ— κ°€μ¥ μΆ‹μµλ‹λ‹¤.
```bash
cd my-project
pyenv local 3.12.8
```

**β‘Ά Global (μ‹μ¤ν… κΈ°λ³Έ)**
μ„μ μ„¤μ •μ΄ μ•„λ¬΄κ²ƒλ„ μ—†μ„ λ• κΈ°λ³ΈμΌλ΅ μ‚¬μ©λλ” λ²„μ „μ…λ‹λ‹¤. macOS μ‹μ¤ν… κΈ°λ³Έ Python λ€μ‹  λ‚΄κ°€ μ„¤μΉν• μµμ‹  λ²„μ „μ„ κΈ°λ³Έκ°’μΌλ΅ λ‘λ” κ²ƒμ΄ μΆ‹μµλ‹λ‹¤.
```bash
pyenv global 3.12.8
```

### 3) κ°€μƒν™κ²½(venv)κ³Ό ν•¨κ» μ‚¬μ©ν•κΈ°
Pyenvλ” Python "μΈν„°ν”„λ¦¬ν„° λ²„μ „"λ§ κ΄€λ¦¬ν•©λ‹λ‹¤. ν”„λ΅μ νΈλ³„ "ν¨ν‚¤μ§€(λΌμ΄λΈλ¬λ¦¬)" κ²©λ¦¬λ” Python λ‚΄μ¥ λ¨λ“μΈ `venv`λ¥Ό ν•¨κ» μ‚¬μ©ν•΄μ•Ό μ™„λ²½ν•΄μ§‘λ‹λ‹¤.

1. **Local λ²„μ „ μ„¤μ •**: ν”„λ΅μ νΈ ν΄λ”μ—μ„ Pyenvλ΅ μ›ν•λ” Python λ²„μ „μ„ μ§€μ •ν•©λ‹λ‹¤.
   ```bash
   pyenv local 3.12.8
   ```
2. **κ°€μƒν™κ²½ μƒμ„±**: μ§€μ •λ Python λ²„μ „μ„ κΈ°λ°μΌλ΅ κ°€μƒν™κ²½μ„ λ§λ“­λ‹λ‹¤.
   ```bash
   python -m venv venv
   ```
3. **κ°€μƒν™κ²½ ν™μ„±ν™”**:
   ```bash
   source venv/bin/activate
   ```

### 4) λ²„μ „ μ‚­μ 
λ” μ΄μƒ μ‚¬μ©ν•μ§€ μ•λ” λ²„μ „μ€ μ‚­μ ν•μ—¬ μ©λ‰μ„ ν™•λ³΄ν•  μ μμµλ‹λ‹¤.
```bash
pyenv uninstall 3.12.1
```

---

## 4. ν™•μΈ (Verification)
μ„¤μ •μ΄ μ¬λ°”λ¥Έμ§€ ν™•μΈν•λ” λ°©λ²•μ…λ‹λ‹¤.

```bash
# μ§€κΈ μ‚¬μ© μ¤‘μΈ Python λ²„μ „κ³Ό κ·Έ μ΄μ (κ²½λ΅) ν™•μΈ
pyenv version
# μ¶λ ¥ μ: 3.12.8 (set by /Users/me/project/.python-version)

# μ‹¤μ  μ‹¤ν–‰ νμΌ μ„μΉ ν™•μΈ (Pyenv shim κ²½λ΅μ—¬μ•Ό ν•¨)
which python
# μ¶λ ¥ μ: /Users/me/.pyenv/shims/python
```

---

## 5. νΈλ¬λΈ”μν… λ° λ°°κ²½μ§€μ‹ (Troubleshooting Log)

μ΄ κ°€μ΄λ“λ” λ‹¤μκ³Ό κ°™μ€ μ‹¤μ  λΉλ“/λ°νƒ€μ„ μ‹¤ν¨ μ‚¬λ΅€λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄ μ‘μ„±λμ—μµλ‹λ‹¤.

### Case 1. Python λΉλ“ μ‹¤ν¨ (Tcl/Tk 9.0 νΈν™μ„±)
**μ¦μƒ**: `pyenv install 3.12.1` μ‹¤ν–‰ μ¤‘ λΉλ“ μ‹¤ν¨.
**μ—λ¬ λ΅κ·Έ** (`python-build...log`):
```text
./Modules/_tkinter.c:692:9: error: call to undeclared function 'Tcl_AppInit'
    if (Tcl_AppInit(v->interp) != TCL_OK) {
```
**μ›μΈ**: macOS Homebrewκ°€ `tcl-tk`λ¥Ό v9.0μΌλ΅ μ—…λ°μ΄νΈν–μΌλ‚, Python 3.12 μ†μ¤μ½”λ“λ” μ•„μ§ v9.0 APIλ¥Ό μ§€μ›ν•μ§€ μ•μµλ‹λ‹¤.
**ν•΄κ²°**: `tcl-tk@8`μ„ μ„¤μΉν•κ³  μ»΄νμΌλ¬ ν”λκ·Έ(`LDFLAGS`, `CPPFLAGS`)λ΅ κ°•μ  μ—°κ²°ν•μ—¬ ν•΄κ²°ν–μµλ‹λ‹¤.

### Case 2. λ°νƒ€μ„ μ—λ¬ (`hashlib` μ†μ„± μ¤λ¥)
**μ¦μƒ**: Flask μ• ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰/ν…μ¤νΈ μ¤‘ μ¶©λ.
**μ—λ¬ λ©”μ‹μ§€**:
```text
AttributeError: module 'hashlib' has no attribute 'scrypt'
```
**μ›μΈ**: macOS κΈ°λ³Έ Python(System Python)μ΄ μ¤λλ `LibreSSL`κ³Ό λ§ν¬λμ–΄ μμ–΄, μµμ‹  λ³΄μ• ν•΄μ‹ μ•κ³ λ¦¬μ¦μΈ `scrypt`λ¥Ό μ§€μ›ν•μ§€ μ•μµλ‹λ‹¤.
**ν•΄κ²°**: `Homebrew`λ¥Ό ν†µν•΄ μ„¤μΉλ μµμ‹  `OpenSSL`μ„ μ‚¬μ©ν•λ” Pythonμ„ λ³„λ„λ΅ μ„¤μΉν•μ—¬ ν•΄κ²°ν–μµλ‹λ‹¤.
